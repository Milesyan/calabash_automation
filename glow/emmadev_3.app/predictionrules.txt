ApplyDailyData
null
["for", "idx", 0, ["len", ["v", "daily_data"]], ["=", "n", ["apply", "UpdateARule", ["v", "idx"], ["v", "a"], ["v", "p"], ["v", "t"], ["v", "daily_data"]]], ["if", ["<", ["v", "n"], 0], ["=", "m", ["v", "offset"]], ["=", "m", ["+", ["v", "n"], ["v", "offset"]]]], ["apply", "PredictCycleRule", ["v", "a"], ["v", "p"], ["v", "t"], ["v", "n"], ["v", "m"]]]
TempRiseRule
["idx", "daily_data"]
["seq", ["initdict", "temp_3_to_0"], ["initdict", "temp_9_to_4"], ["=", "datestr0", ["[][]", "daily_data", ["v", "idx"], "date"]], ["for", "i", ["-", ["v", "idx"], 9], ["+", ["v", "idx"], 1], ["if", ["&&", [">=", ["v", "i"], 0], ["[][]", "daily_data", ["v", "i"], "temperature"]], ["seq", ["=", "datestr", ["[][]", "daily_data", ["v", "i"], "date"]], ["=", "diff", ["-", ["v", "datestr"], ["v", "datestr0"]]], ["if", ["&&", [">=", ["v", "diff"], -9], ["<=", ["v", "diff"], -4]], ["[]=", "temp_9_to_4", ["v", "diff"], ["[][]", "daily_data", ["v", "i"], "temperature"]], ["&&", [">=", ["v", "diff"], -3], ["<=", ["v", "diff"], 0]], ["[]=", "temp_3_to_0", ["v", "diff"], ["[][]", "daily_data", ["v", "i"], "temperature"]], null]], null]], ["if", ["||", ["<", ["len", ["v", "temp_3_to_0"]], 3], ["<", ["len", ["v", "temp_9_to_4"]], 5], ["!", ["in", -1, ["v", "temp_3_to_0"]]], ["!", ["in", -2, ["v", "temp_3_to_0"]]]], ["return", 0], null], ["initlist", "_l"], ["append", ["v", "_l"], ["[]", "temp_9_to_4", -8]], ["append", ["v", "_l"], ["[]", "temp_9_to_4", -7]], ["append", ["v", "_l"], ["[]", "temp_9_to_4", -6]], ["append", ["v", "_l"], ["[]", "temp_9_to_4", -5]], ["append", ["v", "_l"], ["[]", "temp_9_to_4", -4]], ["append", ["v", "_l"], ["[]", "temp_3_to_0", -3]], ["=", "_max", ["max", ["v", "_l"]]], ["if", ["&&", [">", ["[]", "temp_3_to_0", 0], ["+", ["v", "_max"], 0.2]], [">", ["[]", "temp_3_to_0", -1], ["v", "_max"]], [">", ["[]", "temp_3_to_0", -2], ["v", "_max"]]], ["return", 1], null], ["initlist", "_l"], ["append", ["v", "_l"], ["[]", "temp_9_to_4", -9]], ["append", ["v", "_l"], ["[]", "temp_9_to_4", -8]], ["append", ["v", "_l"], ["[]", "temp_9_to_4", -7]], ["append", ["v", "_l"], ["[]", "temp_9_to_4", -6]], ["append", ["v", "_l"], ["[]", "temp_9_to_4", -5]], ["append", ["v", "_l"], ["[]", "temp_9_to_4", -4]], ["=", "_max", ["max", ["v", "_l"]]], ["if", ["&&", [">", ["[]", "temp_3_to_0", 0], ["v", "_max"]], [">", ["[]", "temp_3_to_0", -1], ["v", "_max"]], [">", ["[]", "temp_3_to_0", -2], ["v", "_max"]], [">", ["[]", "temp_3_to_0", -3], ["v", "_max"]]], ["return", 1], null], ["return", 0]]
UpdateARule
["idx", "a", "p", "t", "daily_data"]
["seq", ["=", "d_d", ["[]", "daily_data", ["v", "idx"]]], ["=", "n", ["pb_idx_before", ["[]", "d_d", "date"], ["v", "p"]]], ["if", ["<", ["v", "n"], 0], ["return", 9999], null], ["=", "updated", 0], ["if", ["==", 1, ["[]", "d_d", "period"]], ["seq", ["if", ["!", ["[][]", "a", ["v", "n"], "pb"]], ["if", ["<=", ["-", ["[]", "d_d", "date"], ["+", ["[][]", "p", ["v", "n"], "pb"], 20]], 0], ["seq", ["[][]=", "a", ["v", "n"], "pb", ["[]", "d_d", "date"]], ["[][]=", "a", ["v", "n"], "pe", 0]], ["[][]=", "a", ["+", ["v", "n"], 1], "pb", ["[]", "d_d", "date"]]], ["if", ["<=", ["-", ["[]", "d_d", "date"], ["+", ["[][]", "p", ["v", "n"], "pb"], 15]], 0], ["seq", ["[][]=", "a", ["v", "n"], "pb", ["[]", "d_d", "date"]], ["[][]=", "a", ["v", "n"], "pe", 0]], ["[][]=", "a", ["+", ["v", "n"], 1], "pb", ["[]", "d_d", "date"]]]], ["=", "updated", 1]], ["==", 4, ["[]", "d_d", "period"]], ["if", ["||", ["!", ["[][]", "a", ["v", "n"], "pb"]], ["==", ["[][]", "a", ["v", "n"], "pb"], ["[]", "d_d", "date"]]], ["seq", ["[][]=", "a", ["v", "n"], "pb", ["+", ["[]", "d_d", "date"], 1]], ["[][]=", "a", ["v", "n"], "pe", 0], ["=", "updated", 1]], null], ["==", 3, ["[]", "d_d", "period"]], ["if", ["[][]", "a", ["v", "n"], "pe"], ["seq", ["if", ["<", ["-", ["-", ["[]", "d_d", "date"], 1], ["[][]", "a", ["v", "n"], "pe"]], 0], ["seq", ["[][]=", "a", ["v", "n"], "pe", ["min", ["-", ["[]", "d_d", "date"], 1], ["-", ["[][]", "p", ["v", "n"], "fb"], 1]]], ["=", "updated", 1]], null]], ["seq", ["[][]=", "a", ["v", "n"], "pe", ["min", ["-", ["[]", "d_d", "date"], 1], ["-", ["[][]", "p", ["v", "n"], "fb"], 1]]], ["=", "updated", 1]]], ["==", 2, ["[]", "d_d", "period"]], ["if", ["&&", [">", ["-", ["[]", "d_d", "date"], ["[][]", "p", ["v", "n"], "pe"]], 0], ["<=", ["-", ["[]", "d_d", "date"], ["[][]", "p", ["v", "n"], "pe"]], 5]], ["seq", ["[][]=", "a", ["v", "n"], "pe", ["[]", "d_d", "date"]], ["=", "updated", 1]], null], null], ["if", ["==", 1, ["[]", "d_d", "ovulation_test"]], ["seq", ["=", "diff", ["-", ["[]", "d_d", "date"], ["[][]", "t", ["v", "n"], "ov"]]], ["if", ["&&", [">=", ["v", "diff"], -5], ["<=", ["v", "diff"], 5]], ["seq", ["[][]=", "a", ["v", "n"], "ov", ["+", ["[]", "d_d", "date"], 1]], ["[][]=", "a", ["v", "n"], "ov_lv", 1], ["=", "updated", 1]], null]], null], ["if", ["&&", ["!", ["[][]", "a", ["v", "n"], "ov"], [">", ["[][]", "a", ["v", "n"], "ov_lv"], 2]], ["[]", "d_d", "temperature"], [">=", ["-", ["[]", "d_d", "date"], ["[][]", "t", ["v", "n"], "fb"]], 0], ["<=", ["-", ["[]", "d_d", "date"], ["[][]", "t", ["+", ["v", "n"], 1], "pb"]], 0]], ["if", ["apply", "TempRiseRule", ["v", "idx"], ["v", "daily_data"]], ["seq", ["[][]=", "a", ["v", "n"], "ov", ["-", ["[]", "d_d", "date"], 1]], ["[][]=", "a", ["v", "n"], "ov_lv", 2], ["=", "updated", 1]], null], null], ["if", ["&&", ["!", ["[][]", "a", ["v", "n"], "ov"]], ["[]", "d_d", "cervical_mucus"], [">", ["[]", "d_d", "cervical_mucus"], 1]], ["seq", ["=", "tex", ["&", ["[]", "d_d", "cervical_mucus"], 255]], ["if", ["<=", ["v", "tex"], 33], ["=", "tex", 1], ["<=", ["v", "tex"], 67], ["=", "tex", 2], ["=", "tex", 3]], ["=", "wet", ["&", [">>", ["[]", "d_d", "cervical_mucus"], 8], 255]], ["if", ["<=", ["v", "wet"], 33], ["=", "wet", 1], ["<=", ["v", "wet"], 67], ["=", "wet", 2], ["=", "wet", 3]], ["if", ["&&", ["!", ["[][]", "a", ["v", "n"], "fb"]], [">", ["-", ["[]", "d_d", "date"], ["[][]", "t", ["v", "n"], "pe"]], 0], ["<=", ["-", ["[]", "d_d", "date"], ["-", ["[][]", "t", ["v", "n"], "fb"], 1]], 0], ["&&", [">=", ["v", "wet"], 2], ["==", ["v", "tex"], 3]]], ["seq", ["[][]=", "a", ["v", "n"], "fb", ["[]", "d_d", "date"]], ["=", "updated", 1]], null], ["if", ["&&", [">=", ["-", ["[]", "d_d", "date"], ["[][]", "t", ["v", "n"], "fb"]], 0], ["<=", ["-", ["[]", "d_d", "date"], ["[][]", "t", ["+", ["v", "n"], 1], "pb"]], 0]], ["if", ["&&", [">", ["v", "idx"], 0], ["[][]", "daily_data", ["-", ["v", "idx"], 1], "cervical_mucus"], [">", ["[][]", "daily_data", ["-", ["v", "idx"], 1], "cervical_mucus"], 1], ["<", ["v", "wet"], 3], ["<", ["v", "tex"], 3]], ["seq", ["=", "_tex", ["&", ["[][]", "daily_data", ["-", ["v", "idx"], 1], "cervical_mucus"], 255]], ["if", ["<=", ["v", "_tex"], 33], ["=", "_tex", 1], ["<=", ["v", "_tex"], 67], ["=", "_tex", 2], ["=", "_tex", 3]], ["=", "_wet", ["&", [">>", ["[][]", "daily_data", ["-", ["v", "idx"], 1], "cervical_mucus"], 8], 255]], ["if", ["<=", ["v", "_wet"], 33], ["=", "_wet", 1], ["<=", ["v", "_wet"], 67], ["=", "_wet", 2], ["=", "_wet", 3]], ["if", ["&&", ["==", ["v", "_wet"], 3], ["==", ["v", "_tex"], 3]], ["seq", ["[][]=", "a", ["v", "n"], "pk", ["-", ["[]", "d_d", "date"], 1]], ["if", ["&&", ["<=", ["-", ["[]", "d_d", "date"], ["[][]", "t", ["v", "n"], "ov"]], 5], [">=", ["-", ["[]", "d_d", "date"], ["[][]", "t", ["v", "n"], "ov"]], -5]], ["seq", ["[][]=", "a", ["v", "n"], "ov", ["[]", "d_d", "date"]], ["[][]=", "a", ["v", "n"], "ov_lv", 3]], null], ["=", "updated", 1]], null]], null], null]], null], ["if", ["!", ["v", "updated"]], ["return", 9999], null], ["return", ["-", ["v", "n"], 1]]]
PredictCycleRule
["a", "p", "t", "n", "m"]
["seq", ["if", ["<", ["v", "n"], 0], ["=", "n", 0], null], ["if", [">", ["v", "m"], 13], ["=", "m", 13], null], ["for", "i", ["v", "n"], ["v", "m"], ["if", ["[][]", "a", ["v", "i"], "pb"], ["[][]=", "p", ["v", "i"], "pb", ["[][]", "a", ["v", "i"], "pb"]], ["[][]=", "p", ["v", "i"], "pb", ["+", ["[][]", "p", ["-", ["v", "i"], 1], "pb"], ["[][]", "p", ["-", ["v", "i"], 1], "cl"]]]], ["if", ["&&", ["<", ["v", "i"], 12], ["[][]", "a", ["+", ["v", "i"], 1], "pb"]], ["[][]=", "p", ["v", "i"], "cl", ["-", ["[][]", "a", ["+", ["v", "i"], 1], "pb"], ["[][]", "p", ["v", "i"], "pb"]]], ["[][]", "a", ["v", "i"], "cl"], ["[][]=", "p", ["v", "i"], "cl", ["[][]", "a", ["v", "i"], "cl"]], ["[][]=", "p", ["v", "i"], "cl", ["round", ["avg", ["v", "i"], ["v", "p"], "cl"]]]], ["if", ["&&", ["[][]", "a", ["v", "i"], "pe"], ["[][]", "a", ["v", "i"], "pb"]], ["[][]=", "p", ["v", "i"], "pl", ["-", ["[][]", "a", ["v", "i"], "pe"], ["[][]", "a", ["v", "i"], "pb"]]], ["[][]", "a", ["v", "i"], "pl"], ["[][]=", "p", ["v", "i"], "pl", ["[][]", "a", ["v", "i"], "pl"]], ["&&", ["[][]", "a", ["v", "i"], "pe"]], ["[][]=", "p", ["v", "i"], "pl", ["-", ["[][]", "a", ["v", "i"], "pe"], ["[][]", "p", ["v", "i"], "pb"]]], ["[][]=", "p", ["v", "i"], "pl", ["round", ["avg", ["v", "i"], ["v", "p"], "pl"]]]], ["if", ["[][]", "a", ["v", "i"], "pe"], ["[][]=", "p", ["v", "i"], "pe", ["[][]", "a", ["v", "i"], "pe"]], ["[][]=", "p", ["v", "i"], "pe", ["+", ["[][]", "p", ["v", "i"], "pb"], ["[][]", "p", ["v", "i"], "pl"]]]], ["if", ["[][]", "a", ["v", "i"], "ov"], ["[][]=", "p", ["v", "i"], "ol", ["-", ["+", ["[][]", "p", ["v", "i"], "pb"], ["[][]", "p", ["v", "i"], "cl"]], ["[][]", "a", ["v", "i"], "ov"]]], ["[][]", "a", ["v", "i"], "ol"], ["[][]=", "p", ["v", "i"], "ol", ["[][]", "a", ["v", "i"], "ol"]], ["[][]=", "p", ["v", "i"], "ol", ["round", ["avg", ["v", "i"], ["v", "p"], "ol"]]]], ["if", ["[][]", "a", ["v", "i"], "ov"], ["seq", ["[][]=", "p", ["v", "i"], "ov", ["max", ["[][]", "a", ["v", "i"], "ov"], ["+", ["[][]", "p", ["v", "i"], "pe"], 3]]], ["[][]=", "p", ["v", "i"], "fe", ["+", ["[][]", "p", ["v", "i"], "ov"], 1]]], ["seq", ["[][]=", "p", ["v", "i"], "ov", ["max", ["-", ["+", ["[][]", "p", ["v", "i"], "pb"], ["[][]", "p", ["v", "i"], "cl"]], ["[][]", "p", ["v", "i"], "ol"]], ["+", ["[][]", "p", ["v", "i"], "pe"], 3]]], ["[][]=", "p", ["v", "i"], "fe", ["+", ["[][]", "p", ["v", "i"], "ov"], 1]]]], ["if", ["[][]", "a", ["v", "i"], "fb"], ["[][]=", "p", ["v", "i"], "fb", ["[][]", "a", ["v", "i"], "fb"]], ["[][]", "a", ["v", "i"], "ov"], ["if", ["[][]", "a", ["v", "i"], "pb"], ["[][]=", "p", ["v", "i"], "fb", ["max", ["-", ["[][]", "a", ["v", "i"], "ov"], 5], ["+", ["[][]", "p", ["v", "i"], "pe"], 2]]], ["[][]=", "p", ["v", "i"], "fb", ["max", ["-", ["[][]", "a", ["v", "i"], "ov"], 5], ["+", ["[][]", "p", ["v", "i"], "pe"], 2]]]], ["[][]=", "p", ["v", "i"], "fb", ["max", ["-", ["[][]", "p", ["v", "i"], "ov"], 5], ["+", ["[][]", "p", ["v", "i"], "pe"], 2]]]], ["if", ["[][]", "a", ["v", "i"], "pk"], ["[][]=", "p", ["v", "i"], "pk", ["[][]", "a", ["v", "i"], "pk"]], ["[][]=", "p", ["v", "i"], "pk", ["-", ["[][]", "p", ["v", "i"], "ov"], 1]]]], ["for", "i", ["v", "n"], ["v", "m"], ["if", [">", ["v", "i"], 0], ["seq", ["[][]=", "t", ["v", "i"], "pb", ["+", ["[][]", "p", ["-", ["v", "i"], 1], "pb"], ["[][]", "p", ["-", ["v", "i"], 1], "cl"]]], ["[][]=", "t", ["v", "i"], "cl", ["avg", ["v", "i"], ["v", "p"], "cl"]], ["[][]=", "t", ["v", "i"], "pl", ["avg", ["v", "i"], ["v", "p"], "pl"]], ["[][]=", "t", ["v", "i"], "ol", ["avg", ["v", "i"], ["v", "p"], "ol"]]], null], ["[][]=", "t", ["v", "i"], "pe", ["+", ["[][]", "t", ["v", "i"], "pb"], ["[][]", "t", ["v", "i"], "pl"]]], ["[][]=", "t", ["v", "i"], "ov", ["-", ["+", ["[][]", "t", ["v", "i"], "pb"], ["[][]", "t", ["v", "i"], "cl"]], ["[][]", "t", ["v", "i"], "ol"]]], ["[][]=", "t", ["v", "i"], "fb", ["max", ["+", ["[][]", "t", ["v", "i"], "pe"], 2], ["-", ["[][]", "t", ["v", "i"], "ov"], 5]]], ["[][]=", "t", ["v", "i"], "fe", ["+", ["[][]", "t", ["v", "i"], "ov"], 1]], ["[][]=", "t", ["v", "i"], "pk", ["-", ["[][]", "t", ["v", "i"], "ov"], 1]]]]
InitPredictRule
null
["seq", ["[][]=", "a", 0, "pb", ["v", "pb0"]], ["[][]=", "a", 0, "cl", ["v", "cl0"]], ["[][]=", "a", 0, "pl", ["v", "pl0"]], ["[][]=", "a", 0, "ol", 14], ["[][]=", "p", 0, "pb", ["v", "pb0"]], ["[][]=", "p", 0, "cl", ["v", "cl0"]], ["[][]=", "p", 0, "pl", ["v", "pl0"]], ["[][]=", "p", 0, "ol", 14], ["[][]=", "t", 0, "pb", ["v", "pb0"]], ["[][]=", "t", 0, "cl", ["v", "cl0"]], ["[][]=", "t", 0, "pl", ["v", "pl0"]], ["[][]=", "t", 0, "ol", 14]]
TestInvoker
null
["seq", ["for", "idx", 0, 3, ["=", "s", ["+", ["v", "s"], 1]], ["=", "s", ["apply", "TestInvokee", ["v", "s"]]]], ["return", ["v", "s"]]]
TestInvokee
["x"]
["return", ["+", ["v", "x"], ["v", "x"]]]